â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ðŸ“š ç¬¬ 30 ç« ï¼šæ”¹å–„æ€§èƒ½
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ðŸ“– å­¦ä¹ ç›®æ ‡
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ“ ç†è§£å½±å“æ€§èƒ½çš„å…³é”®å› ç´ 
âœ“ æŽŒæ¡æ€§èƒ½ä¼˜åŒ–çš„åŸºæœ¬æ–¹æ³•
âœ“ å­¦ä¼šä½¿ç”¨ EXPLAIN åˆ†æžæŸ¥è¯¢
âœ“ äº†è§£ç´¢å¼•ä¼˜åŒ–æŠ€å·§

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ðŸ“ æ ¸å¿ƒçŸ¥è¯†ç‚¹
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1ï¸âƒ£  å½±å“æ€§èƒ½çš„å› ç´ 
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   ç¡¬ä»¶å±‚é¢ï¼š
   â€¢ CPU æ€§èƒ½
   â€¢ å†…å­˜å¤§å°
   â€¢ ç£ç›˜é€Ÿåº¦ï¼ˆSSD vs HDDï¼‰
   â€¢ ç½‘ç»œå¸¦å®½
   
   è½¯ä»¶å±‚é¢ï¼š
   â€¢ MySQL é…ç½®
   â€¢ æŸ¥è¯¢ä¼˜åŒ–
   â€¢ ç´¢å¼•è®¾è®¡
   â€¢ è¡¨ç»“æž„è®¾è®¡
   
   åº”ç”¨å±‚é¢ï¼š
   â€¢ SQL è¯­å¥è´¨é‡
   â€¢ è¿žæŽ¥æ± ç®¡ç†
   â€¢ ç¼“å­˜ç­–ç•¥


2ï¸âƒ£  æ€§èƒ½ä¼˜åŒ–åŽŸåˆ™
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   ä¼˜åŒ–é¡ºåºï¼ˆä»Žé«˜åˆ°ä½Žï¼‰ï¼š
   
   1. ç¡¬ä»¶å‡çº§ï¼ˆç«‹ç«¿è§å½±ï¼‰
   2. MySQL é…ç½®è°ƒä¼˜
   3. è¡¨ç»“æž„ä¼˜åŒ–
   4. ç´¢å¼•ä¼˜åŒ–
   5. æŸ¥è¯¢ä¼˜åŒ–
   
   è®°ä½ï¼š
   â€¢ å…ˆæµ‹é‡ï¼ŒåŽä¼˜åŒ–
   â€¢ ä¸è¦è¿‡æ—©ä¼˜åŒ–
   â€¢ å…³æ³¨ 20% çš„æ…¢æŸ¥è¯¢


3ï¸âƒ£  EXPLAIN - åˆ†æžæŸ¥è¯¢
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   EXPLAIN SELECT ...;
   
   ä½œç”¨ï¼š
   â€¢ æ˜¾ç¤ºæŸ¥è¯¢æ‰§è¡Œè®¡åˆ’
   â€¢ äº†è§£ MySQL å¦‚ä½•æ‰§è¡ŒæŸ¥è¯¢
   â€¢ è¯†åˆ«æ€§èƒ½é—®é¢˜
   
   ç¤ºä¾‹ï¼š
   EXPLAIN SELECT * FROM customers
   WHERE cust_id = 10001;


4ï¸âƒ£  EXPLAIN è¾“å‡ºè§£è¯»
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   é‡è¦åˆ—ï¼š
   
   typeï¼ˆè®¿é—®ç±»åž‹ï¼‰ï¼š
   â€¢ ALLï¼šå…¨è¡¨æ‰«æï¼ˆæœ€æ…¢ï¼‰
   â€¢ indexï¼šç´¢å¼•æ‰«æ
   â€¢ rangeï¼šèŒƒå›´æ‰«æ
   â€¢ refï¼šç´¢å¼•æŸ¥æ‰¾
   â€¢ eq_refï¼šå”¯ä¸€ç´¢å¼•æŸ¥æ‰¾
   â€¢ constï¼šå¸¸é‡æŸ¥æ‰¾ï¼ˆæœ€å¿«ï¼‰
   
   possible_keysï¼šå¯èƒ½ä½¿ç”¨çš„ç´¢å¼•
   keyï¼šå®žé™…ä½¿ç”¨çš„ç´¢å¼•
   rowsï¼šé¢„è®¡æ‰«æçš„è¡Œæ•°ï¼ˆè¶Šå°‘è¶Šå¥½ï¼‰
   Extraï¼šé¢å¤–ä¿¡æ¯


5ï¸âƒ£  ç´¢å¼•ä¼˜åŒ–
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   ä½•æ—¶ä½¿ç”¨ç´¢å¼•ï¼š
   âœ“ WHERE å­å¥çš„åˆ—
   âœ“ ORDER BY çš„åˆ—
   âœ“ JOIN çš„åˆ—
   âœ“ ç»å¸¸æŸ¥è¯¢çš„åˆ—
   
   ä½•æ—¶ä¸ç”¨ç´¢å¼•ï¼š
   âœ— å°è¡¨ï¼ˆå…¨è¡¨æ‰«ææ›´å¿«ï¼‰
   âœ— é¢‘ç¹æ›´æ–°çš„åˆ—
   âœ— ä½Žé€‰æ‹©æ€§çš„åˆ—ï¼ˆå¦‚æ€§åˆ«ï¼‰
   âœ— å¾ˆå°‘ä½¿ç”¨çš„åˆ—


6ï¸âƒ£  åˆ›å»ºç´¢å¼•
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   å•åˆ—ç´¢å¼•ï¼š
   CREATE INDEX idx_name ON table(column);
   
   å¤šåˆ—ç´¢å¼•ï¼ˆå¤åˆç´¢å¼•ï¼‰ï¼š
   CREATE INDEX idx_name ON table(col1, col2);
   
   å”¯ä¸€ç´¢å¼•ï¼š
   CREATE UNIQUE INDEX idx_name ON table(column);
   
   åˆ é™¤ç´¢å¼•ï¼š
   DROP INDEX idx_name ON table;


7ï¸âƒ£  æŸ¥è¯¢ä¼˜åŒ–æŠ€å·§
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1. ä½¿ç”¨ SELECT å…·ä½“åˆ—ï¼Œä¸ç”¨ SELECT *
   
   2. ä½¿ç”¨ WHERE è¿‡æ»¤æ•°æ®
   
   3. ä½¿ç”¨ LIMIT é™åˆ¶ç»“æžœ
   
   4. é¿å…åœ¨ WHERE ä¸­ä½¿ç”¨å‡½æ•°
      âŒ WHERE YEAR(order_date) = 2005
      âœ… WHERE order_date BETWEEN '2005-01-01' 
          AND '2005-12-31'
   
   5. ä½¿ç”¨ JOIN è€Œä¸æ˜¯å­æŸ¥è¯¢ï¼ˆé€šå¸¸æ›´å¿«ï¼‰
   
   6. é¿å…ä½¿ç”¨ ORï¼Œè€ƒè™‘ç”¨ UNION
   
   7. ä½¿ç”¨ EXISTS ä»£æ›¿ INï¼ˆå¤§æ•°æ®é›†æ—¶ï¼‰


8ï¸âƒ£  è¡¨ç»“æž„ä¼˜åŒ–
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1. é€‰æ‹©åˆé€‚çš„æ•°æ®ç±»åž‹
      â€¢ ä½¿ç”¨æœ€å°çš„æ•°æ®ç±»åž‹
      â€¢ INT æ¯” VARCHAR å¿«
      â€¢ CHAR å®šé•¿ï¼ŒVARCHAR å˜é•¿
   
   2. é€‚å½“çš„è¡¨æ‹†åˆ†
      â€¢ åž‚ç›´æ‹†åˆ†ï¼šåˆ†ç¦»å¸¸ç”¨å’Œä¸å¸¸ç”¨åˆ—
      â€¢ æ°´å¹³æ‹†åˆ†ï¼šæŒ‰æŸç§è§„åˆ™åˆ†è¡¨
   
   3. ä½¿ç”¨åˆé€‚çš„å­˜å‚¨å¼•æ“Ž
      â€¢ InnoDBï¼šäº‹åŠ¡ã€å¤–é”®
      â€¢ MyISAMï¼šå…¨æ–‡æœç´¢


9ï¸âƒ£  ç¼“å­˜ä¼˜åŒ–
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   æŸ¥è¯¢ç¼“å­˜ï¼ˆMySQL 5.7åŠä»¥å‰ï¼‰ï¼š
   â€¢ ç¼“å­˜ SELECT æŸ¥è¯¢ç»“æžœ
   â€¢ è¡¨æ•°æ®å˜åŒ–æ—¶å¤±æ•ˆ
   â€¢ MySQL 8.0 å·²ç§»é™¤
   
   åº”ç”¨å±‚ç¼“å­˜ï¼š
   â€¢ Redisã€Memcached
   â€¢ ç¼“å­˜çƒ­ç‚¹æ•°æ®
   â€¢ å‡è½»æ•°æ®åº“åŽ‹åŠ›


ðŸ”Ÿ  MySQL é…ç½®ä¼˜åŒ–
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   é‡è¦å‚æ•°ï¼š
   
   innodb_buffer_pool_size
   â€¢ InnoDB ç¼“å†²æ± å¤§å°
   â€¢ å»ºè®®ï¼šç‰©ç†å†…å­˜çš„ 50-80%
   
   max_connections
   â€¢ æœ€å¤§è¿žæŽ¥æ•°
   â€¢ æ ¹æ®å®žé™…éœ€æ±‚è°ƒæ•´
   
   query_cache_size
   â€¢ æŸ¥è¯¢ç¼“å­˜å¤§å°ï¼ˆæ—§ç‰ˆæœ¬ï¼‰
   
   tmp_table_size
   â€¢ ä¸´æ—¶è¡¨å¤§å°
   
   key_buffer_size
   â€¢ MyISAM ç´¢å¼•ç¼“å†²

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ðŸŽ¯ å®žè·µä»»åŠ¡
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ðŸ“ åŸºç¡€ç»ƒä¹ 
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ç»ƒä¹  1: ä½¿ç”¨ EXPLAIN åˆ†æžæŸ¥è¯¢
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
åˆ†æžç®€å•æŸ¥è¯¢

ä½ çš„SQLï¼š
  EXPLAIN SELECT * FROM customers
  WHERE cust_id = 10001;


ç»ƒä¹  2: å¯¹æ¯”æœ‰æ— ç´¢å¼•
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ¯”è¾ƒä¸»é”®æŸ¥è¯¢å’Œæ™®é€šåˆ—æŸ¥è¯¢

ä½ çš„SQLï¼š
  -- ä¸»é”®æŸ¥è¯¢ï¼ˆæœ‰ç´¢å¼•ï¼‰
  EXPLAIN SELECT * FROM customers
  WHERE cust_id = 10001;
  
  -- æ™®é€šåˆ—æŸ¥è¯¢ï¼ˆå¯èƒ½æ— ç´¢å¼•ï¼‰
  EXPLAIN SELECT * FROM customers
  WHERE cust_city = 'Detroit';


ç»ƒä¹  3: æŸ¥çœ‹è¡¨çš„ç´¢å¼•
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æŸ¥çœ‹ customers è¡¨çš„æ‰€æœ‰ç´¢å¼•

ä½ çš„SQLï¼š
  SHOW INDEX FROM customers;


ç»ƒä¹  4: åˆ†æžJOINæŸ¥è¯¢
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æŸ¥çœ‹JOINçš„æ‰§è¡Œè®¡åˆ’

ä½ çš„SQLï¼š
  EXPLAIN SELECT c.cust_name, o.order_num
  FROM customers c
  INNER JOIN orders o ON c.cust_id = o.cust_id;


ç»ƒä¹  5: æ¯”è¾ƒ SELECT * å’Œå…·ä½“åˆ—
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å¯¹æ¯”æ€§èƒ½å·®å¼‚

ä½ çš„SQLï¼š
  -- ä¸æŽ¨è
  EXPLAIN SELECT * FROM customers;
  
  -- æŽ¨è
  EXPLAIN SELECT cust_id, cust_name, cust_email
  FROM customers;

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ðŸš€ è¿›é˜¶æŒ‘æˆ˜
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

æŒ‘æˆ˜ 1: åˆ›å»ºç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢ï¼ˆæ¦‚å¿µï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ä¸ºç»å¸¸æŸ¥è¯¢çš„åˆ—åˆ›å»ºç´¢å¼•

ä½ çš„SQLï¼ˆæ¦‚å¿µï¼‰ï¼š
  -- å‡è®¾ç»å¸¸æŒ‰åŸŽå¸‚æŸ¥è¯¢
  -- CREATE INDEX idx_cust_city 
  -- ON customers(cust_city);
  -- 
  -- å¯¹æ¯”åˆ›å»ºå‰åŽçš„æ‰§è¡Œè®¡åˆ’
  -- EXPLAIN SELECT * FROM customers
  -- WHERE cust_city = 'Detroit';


æŒ‘æˆ˜ 2: å¤åˆç´¢å¼•ä¼˜åŒ–ï¼ˆæ¦‚å¿µï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ä¸ºå¤šåˆ—æŸ¥è¯¢åˆ›å»ºå¤åˆç´¢å¼•

ä½ çš„SQLï¼ˆæ¦‚å¿µï¼‰ï¼š
  -- å‡è®¾ç»å¸¸æŒ‰å›½å®¶å’Œå·žæŸ¥è¯¢
  -- CREATE INDEX idx_country_state
  -- ON customers(cust_country, cust_state);
  -- 
  -- EXPLAIN SELECT * FROM customers
  -- WHERE cust_country = 'USA' 
  -- AND cust_state = 'CA';


æŒ‘æˆ˜ 3: ä¼˜åŒ–å­æŸ¥è¯¢
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å°†å­æŸ¥è¯¢æ”¹ä¸ºJOIN

ä½ çš„SQLï¼š
  -- ä½¿ç”¨å­æŸ¥è¯¢ï¼ˆå¯èƒ½è¾ƒæ…¢ï¼‰
  EXPLAIN SELECT cust_name FROM customers
  WHERE cust_id IN (
      SELECT cust_id FROM orders
  );
  
  -- ä½¿ç”¨JOINï¼ˆé€šå¸¸æ›´å¿«ï¼‰
  EXPLAIN SELECT DISTINCT c.cust_name
  FROM customers c
  INNER JOIN orders o ON c.cust_id = o.cust_id;


æŒ‘æˆ˜ 4: é¿å…å‡½æ•°ä½¿ç”¨
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ä¼˜åŒ–WHEREå­å¥ä¸­çš„å‡½æ•°

ä½ çš„SQLï¼ˆæ¦‚å¿µï¼‰ï¼š
  -- ä¸å¥½ï¼ˆæ— æ³•ä½¿ç”¨ç´¢å¼•ï¼‰
  -- EXPLAIN SELECT * FROM orders
  -- WHERE YEAR(order_date) = 2005;
  -- 
  -- å¥½ï¼ˆå¯ä»¥ä½¿ç”¨ç´¢å¼•ï¼‰
  -- EXPLAIN SELECT * FROM orders
  -- WHERE order_date >= '2005-01-01'
  -- AND order_date < '2006-01-01';

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ðŸ’¡ é‡è¦æç¤º
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âš ï¸  è¿‡æ—©ä¼˜åŒ–æ˜¯ä¸‡æ¶ä¹‹æº
   â€¢ å…ˆè®©ä»£ç å·¥ä½œ
   â€¢ å†æµ‹é‡æ€§èƒ½
   â€¢ æœ€åŽé’ˆå¯¹æ€§ä¼˜åŒ–
   â€¢ å…³æ³¨çœŸæ­£çš„ç“¶é¢ˆ

âš ï¸  ç´¢å¼•ä¸æ˜¯è¶Šå¤šè¶Šå¥½
   ä¼˜ç‚¹ï¼š
   â€¢ åŠ å¿«æŸ¥è¯¢é€Ÿåº¦
   
   ç¼ºç‚¹ï¼š
   â€¢ å ç”¨ç£ç›˜ç©ºé—´
   â€¢ å‡æ…¢å†™å…¥é€Ÿåº¦ï¼ˆINSERT/UPDATE/DELETEï¼‰
   â€¢ ç»´æŠ¤æˆæœ¬
   
   å»ºè®®ï¼š
   â€¢ åªä¸ºå¸¸ç”¨æŸ¥è¯¢åˆ›å»ºç´¢å¼•
   â€¢ å®šæœŸå®¡æŸ¥å’Œåˆ é™¤æ— ç”¨ç´¢å¼•

âš ï¸  EXPLAIN çš„é™åˆ¶
   â€¢ åªæ˜¯é¢„ä¼°ï¼Œä¸æ˜¯å®žé™…æ‰§è¡Œ
   â€¢ rows æ˜¯ä¼°ç®—å€¼
   â€¢ ä¸èƒ½åæ˜ ç¼“å­˜å½±å“
   â€¢ éœ€è¦ç»“åˆå®žé™…æµ‹è¯•

âš ï¸  å¤åˆç´¢å¼•çš„é¡ºåº
   ç´¢å¼• (A, B, C) å¯ä»¥ç”¨äºŽï¼š
   âœ“ WHERE A = ?
   âœ“ WHERE A = ? AND B = ?
   âœ“ WHERE A = ? AND B = ? AND C = ?
   
   ä½†ä¸èƒ½å•ç‹¬ç”¨äºŽï¼š
   âœ— WHERE B = ?
   âœ— WHERE C = ?
   
   æœ€å·¦å‰ç¼€åŽŸåˆ™ï¼

âš ï¸  SELECT * çš„é—®é¢˜
   â€¢ ä¼ è¾“ä¸éœ€è¦çš„æ•°æ®
   â€¢ å¢žåŠ ç½‘ç»œå¼€é”€
   â€¢ å¯èƒ½æ— æ³•ä½¿ç”¨è¦†ç›–ç´¢å¼•
   â€¢ ä»£ç å¯è¯»æ€§å·®
   
   æ€»æ˜¯æŒ‡å®šéœ€è¦çš„åˆ—

âš ï¸  ç¼“å­˜çš„åŒåˆƒå‰‘
   ä¼˜ç‚¹ï¼š
   â€¢ å‡è½»æ•°æ®åº“åŽ‹åŠ›
   â€¢ æé«˜å“åº”é€Ÿåº¦
   
   ç¼ºç‚¹ï¼š
   â€¢ å¢žåŠ å¤æ‚æ€§
   â€¢ ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜
   â€¢ å†…å­˜æ¶ˆè€—
   
   åˆç†ä½¿ç”¨

âš ï¸  ä¸è¦ç›²ç›®ä¼˜åŒ–
   â€¢ ä½¿ç”¨å·¥å…·æµ‹é‡ï¼ˆEXPLAINã€æ…¢æŸ¥è¯¢æ—¥å¿—ï¼‰
   â€¢ ç¡®å®šçœŸæ­£çš„ç“¶é¢ˆ
   â€¢ ä¸€æ¬¡ä¼˜åŒ–ä¸€ä¸ªåœ°æ–¹
   â€¢ å¯¹æ¯”ä¼˜åŒ–å‰åŽçš„æ•ˆæžœ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ðŸ“Š å®žæˆ˜ç¤ºä¾‹
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ç¤ºä¾‹ 1: åŸºæœ¬ EXPLAIN
  EXPLAIN SELECT * FROM customers
  WHERE cust_id = 10001;


ç¤ºä¾‹ 2: åˆ†æž JOIN
  EXPLAIN SELECT c.cust_name, o.order_num, o.order_date
  FROM customers c
  INNER JOIN orders o ON c.cust_id = o.cust_id
  WHERE c.cust_country = 'USA';


ç¤ºä¾‹ 3: æŸ¥çœ‹ç´¢å¼•
  SHOW INDEX FROM customers;
  SHOW INDEX FROM orders;


ç¤ºä¾‹ 4: åˆ›å»ºç´¢å¼•ï¼ˆæ¦‚å¿µï¼‰
  -- CREATE INDEX idx_cust_country 
  -- ON customers(cust_country);


ç¤ºä¾‹ 5: ä¼˜åŒ–å‰åŽå¯¹æ¯”
  -- ä¼˜åŒ–å‰
  SELECT * FROM customers
  WHERE cust_city = 'Detroit';
  
  -- åˆ›å»ºç´¢å¼•
  -- CREATE INDEX idx_city ON customers(cust_city);
  
  -- ä¼˜åŒ–åŽï¼ˆæŸ¥è¯¢ä¸å˜ï¼Œä½†æ›´å¿«ï¼‰
  SELECT * FROM customers
  WHERE cust_city = 'Detroit';


ç¤ºä¾‹ 6: ä½¿ç”¨å…·ä½“åˆ—
  -- ä¸å¥½
  SELECT * FROM customers;
  
  -- å¥½
  SELECT cust_id, cust_name, cust_email
  FROM customers;


ç¤ºä¾‹ 7: ä½¿ç”¨ LIMIT
  -- åªéœ€è¦å‰10æ¡
  SELECT cust_name FROM customers
  ORDER BY cust_name
  LIMIT 10;


ç¤ºä¾‹ 8: é¿å…å‡½æ•°
  -- ä¸å¥½
  SELECT * FROM orders
  WHERE YEAR(order_date) = 2005;
  
  -- å¥½
  SELECT * FROM orders
  WHERE order_date >= '2005-01-01'
  AND order_date < '2006-01-01';


ç¤ºä¾‹ 9: å¤åˆç´¢å¼•
  -- å‡è®¾ç»å¸¸è¿™æ ·æŸ¥è¯¢
  -- SELECT * FROM customers
  -- WHERE cust_country = 'USA' AND cust_state = 'CA';
  -- 
  -- åˆ›å»ºå¤åˆç´¢å¼•
  -- CREATE INDEX idx_country_state
  -- ON customers(cust_country, cust_state);

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ðŸŽ“ çŸ¥è¯†æ£€æŸ¥ç‚¹
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â–¡ ä½ äº†è§£å½±å“æ€§èƒ½çš„ä¸»è¦å› ç´ å—ï¼Ÿ
â–¡ ä½ ä¼šä½¿ç”¨ EXPLAIN åˆ†æžæŸ¥è¯¢å—ï¼Ÿ
â–¡ ä½ ç†è§£ EXPLAIN è¾“å‡ºçš„å«ä¹‰å—ï¼Ÿ
â–¡ ä½ çŸ¥é“ä½•æ—¶åº”è¯¥åˆ›å»ºç´¢å¼•å—ï¼Ÿ
â–¡ ä½ äº†è§£å¤åˆç´¢å¼•çš„æœ€å·¦å‰ç¼€åŽŸåˆ™å—ï¼Ÿ
â–¡ ä½ çŸ¥é“ä¸ºä»€ä¹ˆä¸åº”è¯¥ä½¿ç”¨ SELECT * å—ï¼Ÿ
â–¡ ä½ èƒ½åˆ—ä¸¾å‡ ä¸ªæŸ¥è¯¢ä¼˜åŒ–æŠ€å·§å—ï¼Ÿ
â–¡ ä½ ç†è§£è¿‡æ—©ä¼˜åŒ–çš„å±å®³å—ï¼Ÿ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ðŸ” æ€§èƒ½ä¼˜åŒ–æ£€æŸ¥æ¸…å•
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

æŸ¥è¯¢å±‚é¢ï¼š
â–¡ ä½¿ç”¨å…·ä½“åˆ—ï¼Œé¿å… SELECT *
â–¡ ä½¿ç”¨ WHERE è¿‡æ»¤æ•°æ®
â–¡ ä½¿ç”¨ LIMIT é™åˆ¶ç»“æžœ
â–¡ é¿å…åœ¨ WHERE ä¸­ä½¿ç”¨å‡½æ•°
â–¡ è€ƒè™‘ç”¨ JOIN ä»£æ›¿å­æŸ¥è¯¢
â–¡ é¿å…ä½¿ç”¨ ORï¼Œè€ƒè™‘ UNION

ç´¢å¼•å±‚é¢ï¼š
â–¡ ä¸ºå¸¸ç”¨æŸ¥è¯¢åˆ›å»ºç´¢å¼•
â–¡ WHERE å­å¥çš„åˆ—æœ‰ç´¢å¼•
â–¡ JOIN çš„åˆ—æœ‰ç´¢å¼•
â–¡ ORDER BY çš„åˆ—æœ‰ç´¢å¼•
â–¡ åˆ é™¤æ— ç”¨ç´¢å¼•
â–¡ ä½¿ç”¨å¤åˆç´¢å¼•

è¡¨ç»“æž„å±‚é¢ï¼š
â–¡ ä½¿ç”¨åˆé€‚çš„æ•°æ®ç±»åž‹
â–¡ ä½¿ç”¨æœ€å°çš„æ•°æ®ç±»åž‹
â–¡ è€ƒè™‘è¡¨çš„æ‹†åˆ†
â–¡ ä½¿ç”¨åˆé€‚çš„å­˜å‚¨å¼•æ“Ž

é…ç½®å±‚é¢ï¼š
â–¡ è°ƒæ•´ innodb_buffer_pool_size
â–¡ è®¾ç½®åˆç†çš„ max_connections
â–¡ å¯ç”¨æ…¢æŸ¥è¯¢æ—¥å¿—
â–¡ å®šæœŸåˆ†æžæ…¢æŸ¥è¯¢

ç›‘æŽ§å±‚é¢ï¼š
â–¡ å®šæœŸæŸ¥çœ‹æ…¢æŸ¥è¯¢æ—¥å¿—
â–¡ ç›‘æŽ§æœåŠ¡å™¨èµ„æº
â–¡ ä½¿ç”¨ EXPLAIN åˆ†æžæŸ¥è¯¢
â–¡ å®šæœŸä¼˜åŒ–è¡¨

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ðŸ“‹ æ€§èƒ½ä¼˜åŒ–æ­¥éª¤
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ç¬¬1æ­¥ï¼šè¯†åˆ«é—®é¢˜
  â€¢ å¯ç”¨æ…¢æŸ¥è¯¢æ—¥å¿—
  â€¢ æŸ¥çœ‹å“ªäº›æŸ¥è¯¢æ…¢
  â€¢ ä½¿ç”¨ç›‘æŽ§å·¥å…·

ç¬¬2æ­¥ï¼šåˆ†æžåŽŸå› 
  â€¢ ä½¿ç”¨ EXPLAIN åˆ†æžæŸ¥è¯¢
  â€¢ æ£€æŸ¥æ˜¯å¦æœ‰ç´¢å¼•
  â€¢ æ£€æŸ¥ç´¢å¼•æ˜¯å¦è¢«ä½¿ç”¨

ç¬¬3æ­¥ï¼šåˆ¶å®šæ–¹æ¡ˆ
  â€¢ åˆ›å»ºå¿…è¦çš„ç´¢å¼•
  â€¢ ä¼˜åŒ–æŸ¥è¯¢è¯­å¥
  â€¢ è°ƒæ•´è¡¨ç»“æž„

ç¬¬4æ­¥ï¼šå®žæ–½ä¼˜åŒ–
  â€¢ åœ¨æµ‹è¯•çŽ¯å¢ƒæµ‹è¯•
  â€¢ å¯¹æ¯”ä¼˜åŒ–å‰åŽæ€§èƒ½
  â€¢ éƒ¨ç½²åˆ°ç”Ÿäº§çŽ¯å¢ƒ

ç¬¬5æ­¥ï¼šéªŒè¯æ•ˆæžœ
  â€¢ ç›‘æŽ§æŸ¥è¯¢æ—¶é—´
  â€¢ æ£€æŸ¥èµ„æºä½¿ç”¨
  â€¢ æ”¶é›†ç”¨æˆ·åé¦ˆ

ç¬¬6æ­¥ï¼šæŒç»­æ”¹è¿›
  â€¢ å®šæœŸæ£€æŸ¥æ…¢æŸ¥è¯¢
  â€¢ ä¼˜åŒ–æ–°å‡ºçŽ°çš„é—®é¢˜
  â€¢ æ›´æ–°æ–‡æ¡£

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ¨ æœ¬ç« å°ç»“
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ä½ å·²ç»å­¦ä¼šäº†ï¼š
âœ“ ç†è§£å½±å“æ€§èƒ½çš„å…³é”®å› ç´ 
âœ“ ä½¿ç”¨ EXPLAIN åˆ†æžæŸ¥è¯¢æ‰§è¡Œè®¡åˆ’
âœ“ æŽŒæ¡ç´¢å¼•ä¼˜åŒ–çš„åŸºæœ¬åŽŸåˆ™
âœ“ å­¦ä¼šå¸¸ç”¨çš„æŸ¥è¯¢ä¼˜åŒ–æŠ€å·§
âœ“ äº†è§£è¡¨ç»“æž„ä¼˜åŒ–æ–¹æ³•
âœ“ çŸ¥é“ MySQL é…ç½®ä¼˜åŒ–è¦ç‚¹
âœ“ æŽŒæ¡æ€§èƒ½ä¼˜åŒ–çš„ç³»ç»Ÿæ–¹æ³•

æ ¸å¿ƒè¦ç‚¹ï¼š
â€¢ å…ˆæµ‹é‡ï¼ŒåŽä¼˜åŒ–ï¼Œå…³æ³¨çœŸæ­£çš„ç“¶é¢ˆ
â€¢ EXPLAIN æ˜¯åˆ†æžæŸ¥è¯¢çš„åˆ©å™¨
â€¢ ç´¢å¼•èƒ½æå‡æŸ¥è¯¢é€Ÿåº¦ï¼Œä½†ä¸æ˜¯è¶Šå¤šè¶Šå¥½
â€¢ SELECT å…·ä½“åˆ—ï¼Œé¿å… SELECT *
â€¢ WHERE å­å¥é¿å…ä½¿ç”¨å‡½æ•°
â€¢ å¤åˆç´¢å¼•éµå¾ªæœ€å·¦å‰ç¼€åŽŸåˆ™

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ðŸŽ‰ æ­å–œå®Œæˆå…¨éƒ¨30ç« ï¼
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ä½ å·²ç»ç³»ç»Ÿå­¦ä¹ äº† MySQL çš„ï¼š
âœ“ åŸºç¡€æ¦‚å¿µå’Œæ“ä½œï¼ˆç¬¬1-9ç« ï¼‰
âœ“ æ•°æ®å¤„ç†å’Œå‡½æ•°ï¼ˆç¬¬10-13ç« ï¼‰
âœ“ é«˜çº§æŸ¥è¯¢æŠ€å·§ï¼ˆç¬¬14-18ç« ï¼‰
âœ“ æ•°æ®æ“ä½œï¼ˆç¬¬19-20ç« ï¼‰
âœ“ æ•°æ®åº“å¯¹è±¡ï¼ˆç¬¬21-25ç« ï¼‰
âœ“ äº‹åŠ¡å’Œå®‰å…¨ï¼ˆç¬¬26-28ç« ï¼‰
âœ“ ç»´æŠ¤å’Œä¼˜åŒ–ï¼ˆç¬¬29-30ç« ï¼‰

ç»§ç»­å­¦ä¹ çš„æ–¹å‘ï¼š
â€¢ æ·±å…¥å­¦ä¹  InnoDB å­˜å‚¨å¼•æ“Ž
â€¢ å­¦ä¹  MySQL å¤åˆ¶å’Œé«˜å¯ç”¨
â€¢ å­¦ä¹ åˆ†åº“åˆ†è¡¨
â€¢ å­¦ä¹  MySQL 8.0 æ–°ç‰¹æ€§
â€¢ å®žè·µæ›´å¤šé¡¹ç›®

è®°ä½ï¼š
å®žè·µæ˜¯æœ€å¥½çš„è€å¸ˆï¼
å¤šå†™ SQLï¼Œå¤šåšé¡¹ç›®ï¼Œå¤šæ€»ç»“ç»éªŒã€‚

ç¥ä½ åœ¨ MySQL çš„é“è·¯ä¸Šè¶Šèµ°è¶Šè¿œï¼

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ðŸ’» åŠ¨æ‰‹å®žè·µ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ€§èƒ½åˆ†æžå®žè·µï¼š

-- ä½¿ç”¨ EXPLAIN åˆ†æžæŸ¥è¯¢
EXPLAIN SELECT * FROM customers WHERE cust_id = 10001;
EXPLAIN SELECT * FROM customers WHERE cust_city = 'Detroit';

-- æŸ¥çœ‹è¡¨ç´¢å¼•
SHOW INDEX FROM customers;
SHOW INDEX FROM orders;

-- åˆ†æž JOIN æŸ¥è¯¢
EXPLAIN SELECT c.cust_name, o.order_num
FROM customers c
INNER JOIN orders o ON c.cust_id = o.cust_id;

-- æ¯”è¾ƒä¸åŒå†™æ³•
EXPLAIN SELECT * FROM customers;
EXPLAIN SELECT cust_id, cust_name FROM customers;

æ€§èƒ½ä¼˜åŒ–æ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ï¼


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

æ„Ÿè°¢ä½ å®Œæˆã€ŠMySQLå¿…çŸ¥å¿…ä¼šã€‹çš„å­¦ä¹ ï¼
